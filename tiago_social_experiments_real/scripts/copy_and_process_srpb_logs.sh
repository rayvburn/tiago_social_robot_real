#!/usr/bin/env bash
#
# This script automates activities related to the management of log files generated by the SRPB benchmark
#
# This is intended to be ran on the host machine on which SRPB logs are generated
# The workspace with srpb_evaluation package must be sourced beforehand
#

# path to the logs directory where SRPB logs are saved
logs_dir_path=$1
# name of the new (target) directory to be created in the logs' main directory
named_log_dirname=$2

if [ "$#" -ne 2 ]; then
    echo "2 arguments are required: <path to the logs directory> and <name of the target directory>"
    exit 1
fi

named_log_dir_path=$(realpath $logs_dir_path)/$named_log_dirname
echo "Target directory to store the logs is $named_log_dir_path"

# 1. Copy the generated log files to a separate directory with a custom name
$(rospack find srpb_evaluation)/scripts/copy_logs.sh $logs_dir_path $named_log_dir_path

# 2. Process the log files with the SRPB benchmark
$(rospack find srpb_evaluation)/scripts/evaluate_from_dir.sh $named_log_dir_path
